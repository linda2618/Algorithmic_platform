{"ast":null,"code":"import { onMounted, ref, reactive } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { getGoodsListById, changeGoodsState } from '@/axios/apis.js';\nimport { ElMessage, ElMessageBox } from \"element-plus\";\nexport default {\n  __name: 'Update',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const route = useRoute();\n\n    //接收跳转携带过来的参数Id\n    let Id = route.query.goods_id;\n    const TopicDetail = ref({});\n    const TopicDetailRef = ref();\n    const src = 'https://cube.elemecdn.com/6/94/4d3ea53c084bad6931a56d5158a48jpeg.jpeg';\n    var checkPrice = (rule, value, cb) => {\n      //验证价格的正则表达式\n      let regPrice = /^[1-9]\\d*|0$/;\n      if (regPrice.test(value)) {\n        cb();\n      } else {\n        cb(new Error(\"价格是不小于0的整数\"));\n      }\n    };\n    var checkNumber = (rule, value, cb) => {\n      //验证价格的正则表达式\n      let regNumber = /^[1-9]\\d*|0$/;\n      if (regNumber.test(value)) {\n        cb();\n      } else {\n        cb(new Error(\"数量是不小于0的整数\"));\n      }\n    };\n    var checkWeight = (rule, value, cb) => {\n      //验证价格的正则表达式\n      let regWeight = /^[1-9]\\d*|0$/;\n      if (regWeight.test(value)) {\n        cb();\n      } else {\n        cb(new Error(\"重量是不小于0的整数\"));\n      }\n    };\n    const TopicDetailRules = reactive({\n      goods_price: [{\n        required: true,\n        message: \"请输入价格\",\n        trigger: \"blur\"\n      }, {\n        validator: checkPrice,\n        trigger: \"blur\"\n      }],\n      goods_number: [{\n        required: true,\n        message: \"请输入数量\",\n        trigger: \"blur\"\n      }, {\n        validator: checkNumber,\n        trigger: \"blur\"\n      }],\n      goods_weight: [{\n        required: true,\n        message: \"请输入重量\",\n        trigger: \"blur\"\n      }, {\n        validator: checkWeight,\n        trigger: \"blur\"\n      }]\n    });\n    const labelPosition = ref('left');\n    const size = ref('large');\n    if (Id) {\n      onMounted(() => {\n        getGoodsListByIdView();\n      });\n      const getGoodsListByIdView = async () => {\n        const res = await getGoodsListById(Id);\n        console.log(res);\n        if (res.meta.status !== 200) {\n          return ElMessage.error(\"获取此题目数据失败\");\n        }\n        TopicDetail.value = res.data;\n      };\n    }\n    //取消按钮\n    const resetForm = () => {\n      // TopicDetailRef.value.resetFields()\n      getGoodsListByIdView();\n    };\n\n    //确定按钮\n    const editInfo = async () => {\n      console.log(TopicDetail.value);\n      const res = await changeGoodsState(TopicDetail.value);\n      console.log(res);\n    };\n    const __returned__ = {\n      route,\n      get Id() {\n        return Id;\n      },\n      set Id(v) {\n        Id = v;\n      },\n      TopicDetail,\n      TopicDetailRef,\n      src,\n      get checkPrice() {\n        return checkPrice;\n      },\n      set checkPrice(v) {\n        checkPrice = v;\n      },\n      get checkNumber() {\n        return checkNumber;\n      },\n      set checkNumber(v) {\n        checkNumber = v;\n      },\n      get checkWeight() {\n        return checkWeight;\n      },\n      set checkWeight(v) {\n        checkWeight = v;\n      },\n      TopicDetailRules,\n      labelPosition,\n      size,\n      resetForm,\n      editInfo,\n      onMounted,\n      ref,\n      reactive,\n      get useRoute() {\n        return useRoute;\n      },\n      get getGoodsListById() {\n        return getGoodsListById;\n      },\n      get changeGoodsState() {\n        return changeGoodsState;\n      },\n      get ElMessage() {\n        return ElMessage;\n      },\n      get ElMessageBox() {\n        return ElMessageBox;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"mappings":"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","names":["onMounted","ref","reactive","useRoute","getGoodsListById","changeGoodsState","ElMessage","ElMessageBox","route","Id","query","goods_id","TopicDetail","TopicDetailRef","src","checkPrice","rule","value","cb","regPrice","test","Error","checkNumber","regNumber","checkWeight","regWeight","TopicDetailRules","goods_price","required","message","trigger","validator","goods_number","goods_weight","labelPosition","size","getGoodsListByIdView","res","console","log","meta","status","error","data","resetForm","editInfo"],"sources":["D:/前端基础/22科技月评-算法在线刷题平台/algorithmic_platform/src/components/Topic/Update.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-card>\r\n            <el-form ref=\"TopicDetailRef\" :label-position=\"labelPosition\" label-width=\"100px\" :model=\"TopicDetail\"\r\n                :rules=\"TopicDetailRules\" style=\"max-width: 800px\" :size=\"size\">\r\n                <el-form-item label=\"商品名称\" prop=\"goods_name\">\r\n                    <el-input v-model=\"TopicDetail.goods_name\" type=\"textarea\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"价格\" prop=\"goods_price\">\r\n                    <el-input v-model=\"TopicDetail.goods_price\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"数量\" prop=\"goods_number\">\r\n                    <el-input v-model=\"TopicDetail.goods_number\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"重量\" prop=\"goods_weight\">\r\n                    <el-input v-model=\"TopicDetail.goods_weight\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"添加时间\" prop=\"add_time\">\r\n                    <el-input v-model=\"TopicDetail.add_time\" disabled />\r\n                </el-form-item>\r\n                <el-form-item label=\"更新时间\" prop=\"upd_time\">\r\n                    <el-input v-model=\"TopicDetail.upd_time\" disabled />\r\n                </el-form-item>\r\n                <el-form-item label=\"是否是热销品\" prop=\"is_promote\">\r\n                    <el-tag class=\"ml-2\" v-if=\"TopicDetail.is_promote === 'true'\" type=\"success\" size=\"large\"> 是\r\n                    </el-tag>\r\n                    <el-tag class=\"ml-2\" v-if=\"TopicDetail.is_promote === 'false'\" type=\"danger\" size=\"large\"> 否\r\n                    </el-tag>\r\n                    <el-tag class=\"ml-2\" type=\"danger\" size=\"large\">\r\n                        <el-input v-else v-model=\"TopicDetail.is_promote\" />\r\n\r\n                    </el-tag>\r\n                </el-form-item>\r\n                <el-form-item label=\"详情图片\" prop=\"is_promote\">\r\n                    <div class=\"demo-image__placeholder\">\r\n                        <div class=\"block\">\r\n                            <el-image :src=\"src\" class=\"imgSrc\">\r\n                                <template #placeholder>\r\n                                    <div class=\"image-slot\">Loading<span class=\"dot\">...</span></div>\r\n                                </template>\r\n                            </el-image>\r\n                        </div>\r\n                    </div>\r\n\r\n                </el-form-item>\r\n            </el-form>\r\n            <el-button type=\"primary\" @click=\"editInfo\" size=\"large\"> 确定 </el-button>\r\n            <el-button type=\"info\" @click=\"resetForm(TopicDetailRef)\" size=\"large\">取消</el-button>\r\n\r\n        </el-card>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, ref, reactive } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nimport { getGoodsListById, changeGoodsState } from '@/axios/apis.js'\r\nimport { ElMessage, ElMessageBox } from \"element-plus\";\r\n\r\nconst route = useRoute()\r\n\r\n//接收跳转携带过来的参数Id\r\nlet Id = route.query.goods_id;\r\n\r\nconst TopicDetail = ref({})\r\nconst TopicDetailRef = ref()\r\nconst src =\r\n    'https://cube.elemecdn.com/6/94/4d3ea53c084bad6931a56d5158a48jpeg.jpeg'\r\n\r\nvar checkPrice = (rule, value, cb) => {\r\n    //验证价格的正则表达式\r\n    let regPrice = /^[1-9]\\d*|0$/\r\n    if (regPrice.test(value)) {\r\n        cb();\r\n    } else {\r\n        cb(new Error(\"价格是不小于0的整数\"));\r\n    }\r\n}\r\n\r\nvar checkNumber = (rule, value, cb) => {\r\n    //验证价格的正则表达式\r\n    let regNumber = /^[1-9]\\d*|0$/\r\n    if (regNumber.test(value)) {\r\n        cb();\r\n    } else {\r\n        cb(new Error(\"数量是不小于0的整数\"));\r\n    }\r\n}\r\nvar checkWeight = (rule, value, cb) => {\r\n    //验证价格的正则表达式\r\n    let regWeight = /^[1-9]\\d*|0$/\r\n    if (regWeight.test(value)) {\r\n        cb();\r\n    } else {\r\n        cb(new Error(\"重量是不小于0的整数\"));\r\n    }\r\n}\r\nconst TopicDetailRules = reactive({\r\n    goods_price: [\r\n        { required: true, message: \"请输入价格\", trigger: \"blur\" },\r\n        { validator: checkPrice, trigger: \"blur\" },\r\n    ],\r\n    goods_number: [\r\n        { required: true, message: \"请输入数量\", trigger: \"blur\" },\r\n        { validator: checkNumber, trigger: \"blur\" },\r\n\r\n    ],\r\n    goods_weight: [\r\n        { required: true, message: \"请输入重量\", trigger: \"blur\" },\r\n        { validator: checkWeight, trigger: \"blur\" },\r\n    ],\r\n});\r\n\r\nconst labelPosition = ref('left')\r\nconst size = ref('large')\r\n\r\nif (Id) {\r\n    onMounted(() => {\r\n        getGoodsListByIdView()\r\n    })\r\n\r\n\r\n    const getGoodsListByIdView = async () => {\r\n        const res = await getGoodsListById(Id)\r\n        console.log(res);\r\n        if (res.meta.status !== 200) {\r\n            return ElMessage.error(\"获取此题目数据失败\");\r\n        }\r\n        TopicDetail.value = res.data\r\n    }\r\n}\r\n//取消按钮\r\nconst resetForm = () => {\r\n    // TopicDetailRef.value.resetFields()\r\n    getGoodsListByIdView()\r\n}\r\n\r\n//确定按钮\r\nconst editInfo = async () => {\r\n    console.log(TopicDetail.value);\r\n    const res = await changeGoodsState(TopicDetail.value)\r\n    console.log(res);\r\n}\r\n\r\n\r\n</script>\r\n\r\n<style  lang=\"less\" scoped>\r\n.imgSrc {\r\n    width: 300px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}