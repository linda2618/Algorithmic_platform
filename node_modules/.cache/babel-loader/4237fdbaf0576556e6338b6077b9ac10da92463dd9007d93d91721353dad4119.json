{"ast":null,"code":"import { reactive, ref, onMounted } from \"vue\";\nimport { getGoodsList, deleteOneGood } from \"@/axios/apis.js\";\nimport { ElMessage } from \"element-plus\";\nexport default {\n  __name: 'index',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const queryInfo = reactive({\n      query: \"\",\n      pagenum: 1,\n      pagesize: 10\n    });\n    const goodsList = ref([]);\n    const selectList = ref([]);\n    const dataList = ref([]);\n    const total = ref(0);\n    onMounted(() => {\n      getGoodsListView();\n    });\n    const getGoodsListView = async () => {\n      const res = await getGoodsList(queryInfo);\n      // console.log(res);\n      if (res.meta.status !== 200) {\n        return ElMessage.error(\"获取订单列表失败！\");\n      }\n      goodsList.value = res.data.goods;\n      total.value = res.data.total;\n\n      // rendergoodsList(res.data.goods)\n      // dataList.value = res.data.goods\n    };\n\n    //查询按钮\n    // const onSubmit = () => {\n    //     let arr = ref([])\n\n    //     if (selectList.value.goods_number) {\n    //         arr = dataList.value.filter(v => v.goods_number.indexOf(selectList.value.goods_number) != -1)\n    //     }\n    //     if (selectList.value.pay_status) {\n    //         arr = (selectList.value.pay_status ? arr : dataList.value).filter(v => v.pay_status.indexOf(selectList.value.pay_status) != -1)\n\n    //     }\n    //     else {\n    //         arr = dataList.value\n    //     }\n    //     goodsList.value = []\n    //     goodsList.value.push(arr)\n\n    // }\n    // }\n\n    // 分页\n    const handleSizeChange = newSize => {\n      queryInfo.pagesize = newSize;\n      getGoodsListView();\n    };\n    const handleCurrentChange = newPage => {\n      queryInfo.pagenum = newPage;\n      getGoodsListView();\n    };\n\n    //删除商品\n    const removeGoodsById = async id => {\n      console.log(id);\n      const res = await deleteOneGood(id);\n      console.log(res);\n    };\n    const __returned__ = {\n      queryInfo,\n      goodsList,\n      selectList,\n      dataList,\n      total,\n      getGoodsListView,\n      handleSizeChange,\n      handleCurrentChange,\n      removeGoodsById,\n      reactive,\n      ref,\n      onMounted,\n      get getGoodsList() {\n        return getGoodsList;\n      },\n      get deleteOneGood() {\n        return deleteOneGood;\n      },\n      get ElMessage() {\n        return ElMessage;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"mappings":"AAoEA,SAASA,QAAQ,EAAEC,GAAG,EAAEC,SAAS,QAAQ,KAAK;AAC9C,SAASC,YAAY,EAAEC,aAAa,QAAQ,iBAAiB;AAC7D,SAASC,SAAS,QAAQ,cAAc;;;;;;;IAGxC,MAAMC,SAAS,GAAGN,QAAQ,CAAC;MACvBO,KAAK,EAAE,EAAE;MACTC,OAAO,EAAE,CAAC;MACVC,QAAQ,EAAE;IACd,CAAC,CAAC;IAEF,MAAMC,SAAS,GAAGT,GAAG,CAAC,EAAE,CAAC;IACzB,MAAMU,UAAU,GAAGV,GAAG,CAAC,EAAE,CAAC;IAC1B,MAAMW,QAAQ,GAAGX,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMY,KAAK,GAAGZ,GAAG,CAAC,CAAC,CAAC;IAEpBC,SAAS,CAAC,MAAM;MACZY,gBAAgB,EAAE;IACtB,CAAC,CAAC;IAEF,MAAMA,gBAAgB,GAAG,YAAY;MACjC,MAAMC,GAAG,GAAG,MAAMZ,YAAY,CAACG,SAAS,CAAC;MACzC;MACA,IAAIS,GAAG,CAACC,IAAI,CAACC,MAAM,KAAK,GAAG,EAAE;QACzB,OAAOZ,SAAS,CAACa,KAAK,CAAC,WAAW,CAAC;MACvC;MAEAR,SAAS,CAACS,KAAK,GAAGJ,GAAG,CAACK,IAAI,CAACC,KAAK;MAChCR,KAAK,CAACM,KAAK,GAAGJ,GAAG,CAACK,IAAI,CAACP,KAAK;;MAE5B;MACA;IACJ,CAAC;;IAED;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;;IAEA;IACA,MAAMS,gBAAgB,GAAIC,OAAO,IAAK;MAClCjB,SAAS,CAACG,QAAQ,GAAGc,OAAO;MAC5BT,gBAAgB,EAAE;IACtB,CAAC;IACD,MAAMU,mBAAmB,GAAIC,OAAO,IAAK;MACrCnB,SAAS,CAACE,OAAO,GAAGiB,OAAO;MAC3BX,gBAAgB,EAAE;IACtB,CAAC;;IAED;IACA,MAAMY,eAAe,GAAG,MAAOC,EAAE,IAAK;MAClCC,OAAO,CAACC,GAAG,CAACF,EAAE,CAAC;MACf,MAAMZ,GAAG,GAAG,MAAMX,aAAa,CAACuB,EAAE,CAAC;MACnCC,OAAO,CAACC,GAAG,CAACd,GAAG,CAAC;IAEpB,CAAC","names":["reactive","ref","onMounted","getGoodsList","deleteOneGood","ElMessage","queryInfo","query","pagenum","pagesize","goodsList","selectList","dataList","total","getGoodsListView","res","meta","status","error","value","data","goods","handleSizeChange","newSize","handleCurrentChange","newPage","removeGoodsById","id","console","log"],"sources":["D:/前端基础/22科技月评-算法在线刷题平台/algorithmic_platform/src/components/Topic/index.vue"],"sourcesContent":["<template>\r\n    <!-- 商品列表代替 -->\r\n    <div>\r\n        <!-- 面包屑导航区域 -->\r\n        <el-breadcrumb separator=\">\">\r\n            <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n            <el-breadcrumb-item>题目管理</el-breadcrumb-item>\r\n            <el-breadcrumb-item>题目列表</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n\r\n        <el-card>\r\n            <el-row>\r\n                <!-- <el-col :span=\"9\">\r\n                <el-form :inline=\"true\" class=\"demo-form-inline\">\r\n                    <el-form-item label=\"订单编号\">\r\n                        <el-input v-model=\"queryInfo.query\" placeholder=\"请输入关键字\" clearable @clear=\"getgoodsListView\" />\r\n            </el-col>\r\n            </el-form-item>\r\n            <el-form-item label=\"是否支付\">\r\n                <el-input v-model=\"selectList.pay_status\" placeholder=\"请输入关键字\" />\r\n            </el-form-item>\r\n            </el-form>\r\n            <el-col :span=\"4\">\r\n                <el-button type=\"primary\" @click=\"getgoodsListView\">查询</el-button>\r\n            </el-col> -->\r\n\r\n                <el-tag class=\"ml-2\" size=\"large\" type=\"success\">题目列表</el-tag>\r\n                <el-table :data=\"goodsList\" stripe border style=\"width: 100%\">\r\n                    <el-table-column type=\"index\" />\r\n                    <el-table-column prop=\"goods_name\" label=\"商品名称\" width=\"600\" />\r\n                    <el-table-column prop=\"goods_price\" label=\"价格\" width=\"120\" />\r\n                    <el-table-column prop=\"goods_number\" label=\"数量\" width=\"120\" />\r\n                    <el-table-column label=\"是否付款\" prop=\"goods_state\" width=\"120\">\r\n                        <template v-slot=\"scope\">\r\n                            <el-tag type=\"danger\" v-if=\"scope.row.pay_status === '0'\">未通过</el-tag>\r\n                            <el-tag type=\"success\" v-if=\"scope.row.pay_status === '2'\">已审核</el-tag>\r\n                            <el-tag type=\"\" v-else>审核中</el-tag>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"add_time\" label=\"添加时间\" />\r\n                    <el-table-column prop=\"upd_time\" label=\"更新时间\" />\r\n                    <el-table-column label=\"操作\">\r\n                        <template v-slot=\"scope\">\r\n                            <!-- 修改按钮 -->\r\n                            <el-tooltip class=\"item\" effect=\"dark\" content=\"跳转修改题目\" placement=\"top\" :enterable=\"false\">\r\n                                <el-button type=\"primary\" class=\"iconfont icon-zuoti\" circle\r\n                                    @click=\"showEditDialog(scope.row.id)\" size=\"large\">\r\n                                </el-button>\r\n                            </el-tooltip>\r\n                            <!-- 删除按钮 -->\r\n                            <el-button type=\"danger\" class=\"iconfont icon-shanchu2\" circle\r\n                                @click=\"removeGoodsById(scope.row.id)\" size=\"large\">\r\n                            </el-button>\r\n\r\n                        </template>\r\n                    </el-table-column>\r\n                </el-table>\r\n                <!-- 分页区域 -->\r\n                <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n                    :current-page=\"queryInfo.pagenum\" :page-sizes=\"[5, 10, 15]\" :page-size=\"queryInfo.pagesize\"\r\n                    layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\r\n                </el-pagination>\r\n            </el-row>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref, onMounted } from \"vue\";\r\nimport { getGoodsList, deleteOneGood } from \"@/axios/apis.js\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\n\r\nconst queryInfo = reactive({\r\n    query: \"\",\r\n    pagenum: 1,\r\n    pagesize: 10,\r\n});\r\n\r\nconst goodsList = ref([]);\r\nconst selectList = ref([]);\r\nconst dataList = ref([]);\r\nconst total = ref(0);\r\n\r\nonMounted(() => {\r\n    getGoodsListView();\r\n});\r\n\r\nconst getGoodsListView = async () => {\r\n    const res = await getGoodsList(queryInfo);\r\n    // console.log(res);\r\n    if (res.meta.status !== 200) {\r\n        return ElMessage.error(\"获取订单列表失败！\");\r\n    }\r\n\r\n    goodsList.value = res.data.goods;\r\n    total.value = res.data.total;\r\n\r\n    // rendergoodsList(res.data.goods)\r\n    // dataList.value = res.data.goods\r\n};\r\n\r\n//查询按钮\r\n// const onSubmit = () => {\r\n//     let arr = ref([])\r\n\r\n//     if (selectList.value.goods_number) {\r\n//         arr = dataList.value.filter(v => v.goods_number.indexOf(selectList.value.goods_number) != -1)\r\n//     }\r\n//     if (selectList.value.pay_status) {\r\n//         arr = (selectList.value.pay_status ? arr : dataList.value).filter(v => v.pay_status.indexOf(selectList.value.pay_status) != -1)\r\n\r\n//     }\r\n//     else {\r\n//         arr = dataList.value\r\n//     }\r\n//     goodsList.value = []\r\n//     goodsList.value.push(arr)\r\n\r\n// }\r\n// }\r\n\r\n// 分页\r\nconst handleSizeChange = (newSize) => {\r\n    queryInfo.pagesize = newSize;\r\n    getGoodsListView();\r\n};\r\nconst handleCurrentChange = (newPage) => {\r\n    queryInfo.pagenum = newPage;\r\n    getGoodsListView();\r\n};\r\n\r\n//删除商品\r\nconst removeGoodsById = async (id) => {\r\n    console.log(id);\r\n    const res = await deleteOneGood(id)\r\n    console.log(res);\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}