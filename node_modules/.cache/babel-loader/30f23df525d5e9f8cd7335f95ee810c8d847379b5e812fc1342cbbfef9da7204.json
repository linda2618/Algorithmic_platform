{"ast":null,"code":"import { reactive, ref, onMounted } from 'vue';\nimport { getOrderList } from '@/axios/apis.js';\nexport default {\n  __name: 'index',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const queryInfo = reactive({\n      query: \"\",\n      pagenum: 1,\n      pagesize: 10\n    });\n    const orderList = ref([]);\n    const total = ref(0);\n    onMounted(() => {\n      getOrderListView();\n    });\n    const getOrderListView = async () => {\n      const res = await getOrderList(queryInfo);\n      // console.log(res);\n      if (res.meta.status !== 200) {\n        return ElMessage.error(\"获取订单列表失败！\");\n      }\n      orderList.value = res.data.goods;\n      total.value = res.data.total;\n    };\n\n    //查询按钮\n    const onSubmit = () => {\n      console.log(123);\n      console.log(orderList.value.order_number);\n      console.log('222', orderList.value.order_price);\n      let arr = ref([]);\n      if (orderList.value.order_number || orderList.value.order_price) {\n        if (orderList.value.order_number) {\n          arr = orderList.value.filter(v => v.order_number.indexOf(orderList.value.order_number) != -1);\n        }\n        if (orderList.value.order_price) {\n          arr = (orderList.value.order_number ? arr : orderList.value).filter(v => v.order_price.indexOf(orderList.value.order_price) != -1);\n        } else {\n          arr = orderList.value;\n          console.log('123', arr);\n        }\n        orderList.value.total = arr.length;\n      }\n    };\n\n    // 分页\n    const handleSizeChange = newSize => {\n      queryInfo.pagesize = newSize;\n      getOrderListView();\n    };\n    const handleCurrentChange = newPage => {\n      queryInfo.pagenum = newPage;\n      getOrderListView();\n    };\n    const __returned__ = {\n      queryInfo,\n      orderList,\n      total,\n      getOrderListView,\n      onSubmit,\n      handleSizeChange,\n      handleCurrentChange,\n      reactive,\n      ref,\n      onMounted,\n      get getOrderList() {\n        return getOrderList;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"mappings":"AA+CA,SAASA,QAAQ,EAAEC,GAAG,EAAEC,SAAS,QAAQ,KAAK;AAC9C,SAASC,YAAY,QAAQ,iBAAiB;;;;;;;IAE9C,MAAMC,SAAS,GAAGJ,QAAQ,CAAC;MACvBK,KAAK,EAAE,EAAE;MACTC,OAAO,EAAE,CAAC;MACVC,QAAQ,EAAE;IACd,CAAC,CAAC;IAEF,MAAMC,SAAS,GAAGP,GAAG,CAAC,EAAE,CAAC;IACzB,MAAMQ,KAAK,GAAGR,GAAG,CAAC,CAAC,CAAC;IAGpBC,SAAS,CAAC,MAAM;MACZQ,gBAAgB,EAAE;IACtB,CAAC,CAAC;IAEF,MAAMA,gBAAgB,GAAG,YAAY;MACjC,MAAMC,GAAG,GAAG,MAAMR,YAAY,CAACC,SAAS,CAAC;MACzC;MACA,IAAIO,GAAG,CAACC,IAAI,CAACC,MAAM,KAAK,GAAG,EAAE;QACzB,OAAOC,SAAS,CAACC,KAAK,CAAC,WAAW,CAAC;MACvC;MACAP,SAAS,CAACQ,KAAK,GAAGL,GAAG,CAACM,IAAI,CAACC,KAAK;MAChCT,KAAK,CAACO,KAAK,GAAGL,GAAG,CAACM,IAAI,CAACR,KAAK;IAEhC,CAAC;;IAED;IACA,MAAMU,QAAQ,GAAG,MAAM;MACnBC,OAAO,CAACC,GAAG,CAAC,GAAG,CAAC;MAChBD,OAAO,CAACC,GAAG,CAACb,SAAS,CAACQ,KAAK,CAACM,YAAY,CAAC;MACzCF,OAAO,CAACC,GAAG,CAAC,KAAK,EAAEb,SAAS,CAACQ,KAAK,CAACO,WAAW,CAAC;MAC/C,IAAIC,GAAG,GAAGvB,GAAG,CAAC,EAAE,CAAC;MACjB,IAAIO,SAAS,CAACQ,KAAK,CAACM,YAAY,IAAId,SAAS,CAACQ,KAAK,CAACO,WAAW,EAAE;QAC7D,IAAIf,SAAS,CAACQ,KAAK,CAACM,YAAY,EAAE;UAC9BE,GAAG,GAAGhB,SAAS,CAACQ,KAAK,CAACS,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACJ,YAAY,CAACK,OAAO,CAACnB,SAAS,CAACQ,KAAK,CAACM,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC;QACjG;QACA,IAAId,SAAS,CAACQ,KAAK,CAACO,WAAW,EAAE;UAE7BC,GAAG,GAAG,CAAChB,SAAS,CAACQ,KAAK,CAACM,YAAY,GAAGE,GAAG,GAAGhB,SAAS,CAACQ,KAAK,EAAES,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACH,WAAW,CAACI,OAAO,CAACnB,SAAS,CAACQ,KAAK,CAACO,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC;QACtI,CAAC,MACI;UACDC,GAAG,GAAGhB,SAAS,CAACQ,KAAK;UACrBI,OAAO,CAACC,GAAG,CAAC,KAAK,EAAEG,GAAG,CAAC;QAC3B;QACAhB,SAAS,CAACQ,KAAK,CAACP,KAAK,GAAGe,GAAG,CAACI,MAAM;MACtC;IACJ,CAAC;;IAED;IACA,MAAMC,gBAAgB,GAAIC,OAAO,IAAK;MAClC1B,SAAS,CAACG,QAAQ,GAAGuB,OAAO;MAC5BpB,gBAAgB,EAAE;IACtB,CAAC;IACD,MAAMqB,mBAAmB,GAAIC,OAAO,IAAK;MACrC5B,SAAS,CAACE,OAAO,GAAG0B,OAAO;MAC3BtB,gBAAgB,EAAE;IACtB,CAAC","names":["reactive","ref","onMounted","getOrderList","queryInfo","query","pagenum","pagesize","orderList","total","getOrderListView","res","meta","status","ElMessage","error","value","data","goods","onSubmit","console","log","order_number","order_price","arr","filter","v","indexOf","length","handleSizeChange","newSize","handleCurrentChange","newPage"],"sources":["D:/前端基础/22科技月评-算法在线刷题平台/algorithmic_platform/src/components/Topic/index.vue"],"sourcesContent":["<template>\r\n    <!-- 商品列表代替 -->\r\n    <div>\r\n        <!-- 面包屑导航区域 -->\r\n        <el-breadcrumb separator=\">\">\r\n            <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n            <el-breadcrumb-item>题目管理</el-breadcrumb-item>\r\n            <el-breadcrumb-item>题目列表</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n\r\n        <el-card>\r\n            <el-row>\r\n                <el-form :inline=\"true\" :model=\"orderList\" class=\"demo-form-inline\">\r\n                    <el-form-item label=\"订单编号\">\r\n                        <el-input v-model=\"orderList.order_number\" placeholder=\"请输入关键字\" />\r\n                    </el-form-item>\r\n                    <el-form-item label=\"订单价格\">\r\n                        <el-input v-model=\"orderList.order_price\" placeholder=\"请输入关键字\" />\r\n                    </el-form-item>\r\n                    <el-form-item>\r\n                        <el-button type=\"primary\" @click=\"onSubmit\">查询</el-button>\r\n                    </el-form-item>\r\n                </el-form>\r\n                <el-table :data=\"orderList\" stripe border style=\"width: 100%\">\r\n                    <el-table-column type=\"index\" />\r\n                    <el-table-column prop=\"order_number\" label=\"标题\" />\r\n                    <el-table-column prop=\"order_price\" label=\"订单价格\" />\r\n                    <el-table-column label=\"是否付款\" prop=\"pay_status\">\r\n                        <template v-slot=\"scope\">\r\n                            <el-tag type=\"success\" v-if=\"scope.row.pay_status === '1'\">已付款</el-tag>\r\n                            <el-tag type=\"danger\" v-else>未付款</el-tag>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"create_time\" label=\"创建时间\" />\r\n                    <el-table-column label=\"操作\" />\r\n                </el-table>\r\n                <!-- 分页区域 -->\r\n                <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n                    :current-page=\"queryInfo.pagenum\" :page-sizes=\"[5, 10, 15]\" :page-size=\"queryInfo.pagesize\"\r\n                    layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\r\n                </el-pagination>\r\n            </el-row>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref, onMounted } from 'vue'\r\nimport { getOrderList } from '@/axios/apis.js'\r\n\r\nconst queryInfo = reactive({\r\n    query: \"\",\r\n    pagenum: 1,\r\n    pagesize: 10,\r\n})\r\n\r\nconst orderList = ref([])\r\nconst total = ref(0)\r\n\r\n\r\nonMounted(() => {\r\n    getOrderListView()\r\n})\r\n\r\nconst getOrderListView = async () => {\r\n    const res = await getOrderList(queryInfo)\r\n    // console.log(res);\r\n    if (res.meta.status !== 200) {\r\n        return ElMessage.error(\"获取订单列表失败！\");\r\n    }\r\n    orderList.value = res.data.goods\r\n    total.value = res.data.total\r\n\r\n}\r\n\r\n//查询按钮\r\nconst onSubmit = () => {\r\n    console.log(123);\r\n    console.log(orderList.value.order_number);\r\n    console.log('222', orderList.value.order_price);\r\n    let arr = ref([])\r\n    if (orderList.value.order_number || orderList.value.order_price) {\r\n        if (orderList.value.order_number) {\r\n            arr = orderList.value.filter(v => v.order_number.indexOf(orderList.value.order_number) != -1)\r\n        }\r\n        if (orderList.value.order_price) {\r\n\r\n            arr = (orderList.value.order_number ? arr : orderList.value).filter(v => v.order_price.indexOf(orderList.value.order_price) != -1)\r\n        }\r\n        else {\r\n            arr = orderList.value\r\n            console.log('123', arr);\r\n        }\r\n        orderList.value.total = arr.length\r\n    }\r\n}\r\n\r\n// 分页\r\nconst handleSizeChange = (newSize) => {\r\n    queryInfo.pagesize = newSize;\r\n    getOrderListView();\r\n}\r\nconst handleCurrentChange = (newPage) => {\r\n    queryInfo.pagenum = newPage;\r\n    getOrderListView();\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}