{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { reactive, ref, onMounted } from 'vue';\nimport { getOrderList } from '@/axios/apis.js';\nexport default {\n  __name: 'index',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const queryInfo = reactive({\n      query: \"\",\n      pagenum: 1,\n      pagesize: 10\n    });\n    const orderList = ref([]);\n    const selectList = ref([]);\n    const dataList = ref([]);\n    const total = ref(0);\n    onMounted(() => {\n      getOrderListView();\n    });\n    const getOrderListView = async () => {\n      const res = await getOrderList(queryInfo);\n      // console.log(res);\n      if (res.meta.status !== 200) {\n        return ElMessage.error(\"获取订单列表失败！\");\n      }\n      renderOrderList(res.data.goods);\n      // selectList.value = res.data.goods\n      dataList.value = res.data.goods;\n      total.value = res.data.total;\n    };\n    const renderOrderList = arr => {\n      orderList.value = [];\n      orderList.value.push(arr);\n    };\n\n    //查询按钮\n    const onSubmit = () => {\n      let arr = ref([]);\n      if (selectList.value.order_number || selectList.value.order_price) {\n        if (selectList.value.order_number) {\n          arr = dataList.value.filter(v => v.order_number.indexOf(selectList.value.order_number) != -1);\n        }\n        if (selectList.value.pay_status) {\n          arr = (selectList.value.pay_status ? arr : dataList.value).filter(v => v.pay_status.indexOf(selectList.value.pay_status) != -1);\n        } else {\n          arr = dataList.value;\n        }\n        orderList.value = [];\n        orderList.value.push(arr);\n      }\n    };\n\n    // 分页\n    const handleSizeChange = newSize => {\n      queryInfo.pagesize = newSize;\n      getOrderListView();\n    };\n    const handleCurrentChange = newPage => {\n      queryInfo.pagenum = newPage;\n      getOrderListView();\n    };\n    const __returned__ = {\n      queryInfo,\n      orderList,\n      selectList,\n      dataList,\n      total,\n      getOrderListView,\n      renderOrderList,\n      onSubmit,\n      handleSizeChange,\n      handleCurrentChange,\n      reactive,\n      ref,\n      onMounted,\n      get getOrderList() {\n        return getOrderList;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"mappings":";AA+CA,SAASA,QAAQ,EAAEC,GAAG,EAAEC,SAAS,QAAQ,KAAK;AAC9C,SAASC,YAAY,QAAQ,iBAAiB;;;;;;;IAE9C,MAAMC,SAAS,GAAGJ,QAAQ,CAAC;MACvBK,KAAK,EAAE,EAAE;MACTC,OAAO,EAAE,CAAC;MACVC,QAAQ,EAAE;IACd,CAAC,CAAC;IAEF,MAAMC,SAAS,GAAGP,GAAG,CAAC,EAAE,CAAC;IACzB,MAAMQ,UAAU,GAAGR,GAAG,CAAC,EAAE,CAAC;IAC1B,MAAMS,QAAQ,GAAGT,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMU,KAAK,GAAGV,GAAG,CAAC,CAAC,CAAC;IAGpBC,SAAS,CAAC,MAAM;MACZU,gBAAgB,EAAE;IACtB,CAAC,CAAC;IAEF,MAAMA,gBAAgB,GAAG,YAAY;MACjC,MAAMC,GAAG,GAAG,MAAMV,YAAY,CAACC,SAAS,CAAC;MACzC;MACA,IAAIS,GAAG,CAACC,IAAI,CAACC,MAAM,KAAK,GAAG,EAAE;QACzB,OAAOC,SAAS,CAACC,KAAK,CAAC,WAAW,CAAC;MACvC;MAEAC,eAAe,CAACL,GAAG,CAACM,IAAI,CAACC,KAAK,CAAC;MAC/B;MACAV,QAAQ,CAACW,KAAK,GAAGR,GAAG,CAACM,IAAI,CAACC,KAAK;MAC/BT,KAAK,CAACU,KAAK,GAAGR,GAAG,CAACM,IAAI,CAACR,KAAK;IAEhC,CAAC;IAED,MAAMO,eAAe,GAAII,GAAG,IAAK;MAC7Bd,SAAS,CAACa,KAAK,GAAG,EAAE;MACpBb,SAAS,CAACa,KAAK,CAACE,IAAI,CAACD,GAAG,CAAC;IAC7B,CAAC;;IAED;IACA,MAAME,QAAQ,GAAG,MAAM;MACnB,IAAIF,GAAG,GAAGrB,GAAG,CAAC,EAAE,CAAC;MAEjB,IAAIQ,UAAU,CAACY,KAAK,CAACI,YAAY,IAAIhB,UAAU,CAACY,KAAK,CAACK,WAAW,EAAE;QAC/D,IAAIjB,UAAU,CAACY,KAAK,CAACI,YAAY,EAAE;UAC/BH,GAAG,GAAGZ,QAAQ,CAACW,KAAK,CAACM,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACH,YAAY,CAACI,OAAO,CAACpB,UAAU,CAACY,KAAK,CAACI,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC;QACjG;QACA,IAAIhB,UAAU,CAACY,KAAK,CAACS,UAAU,EAAE;UAC7BR,GAAG,GAAG,CAACb,UAAU,CAACY,KAAK,CAACS,UAAU,GAAGR,GAAG,GAAGZ,QAAQ,CAACW,KAAK,EAAEM,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACE,UAAU,CAACD,OAAO,CAACpB,UAAU,CAACY,KAAK,CAACS,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;QAEnI,CAAC,MACI;UACDR,GAAG,GAAGZ,QAAQ,CAACW,KAAK;QACxB;QACAb,SAAS,CAACa,KAAK,GAAG,EAAE;QACpBb,SAAS,CAACa,KAAK,CAACE,IAAI,CAACD,GAAG,CAAC;MAC7B;IACJ,CAAC;;IAED;IACA,MAAMS,gBAAgB,GAAIC,OAAO,IAAK;MAClC5B,SAAS,CAACG,QAAQ,GAAGyB,OAAO;MAC5BpB,gBAAgB,EAAE;IACtB,CAAC;IACD,MAAMqB,mBAAmB,GAAIC,OAAO,IAAK;MACrC9B,SAAS,CAACE,OAAO,GAAG4B,OAAO;MAC3BtB,gBAAgB,EAAE;IACtB,CAAC","names":["reactive","ref","onMounted","getOrderList","queryInfo","query","pagenum","pagesize","orderList","selectList","dataList","total","getOrderListView","res","meta","status","ElMessage","error","renderOrderList","data","goods","value","arr","push","onSubmit","order_number","order_price","filter","v","indexOf","pay_status","handleSizeChange","newSize","handleCurrentChange","newPage"],"sources":["D:/前端基础/22科技月评-算法在线刷题平台/algorithmic_platform/src/components/Topic/index.vue"],"sourcesContent":["<template>\r\n    <!-- 商品列表代替 -->\r\n    <div>\r\n        <!-- 面包屑导航区域 -->\r\n        <el-breadcrumb separator=\">\">\r\n            <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n            <el-breadcrumb-item>题目管理</el-breadcrumb-item>\r\n            <el-breadcrumb-item>题目列表</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n\r\n        <el-card>\r\n            <el-row>\r\n                <el-form :inline=\"true\" :model=\"selectList\" class=\"demo-form-inline\">\r\n                    <el-form-item label=\"订单编号\">\r\n                        <el-input v-model=\"selectList.order_number\" placeholder=\"请输入关键字\" />\r\n                    </el-form-item>\r\n                    <el-form-item label=\"是否支付\">\r\n                        <el-input v-model=\"selectList.pay_status\" placeholder=\"请输入关键字\" />\r\n                    </el-form-item>\r\n                    <el-form-item>\r\n                        <el-button type=\"primary\" @click=\"onSubmit\">查询</el-button>\r\n                    </el-form-item>\r\n                </el-form>\r\n                <el-table :data=\"orderList\" stripe border style=\"width: 100%\">\r\n                    <el-table-column type=\"index\" />\r\n                    <el-table-column prop=\"order_number\" label=\"标题\" />\r\n                    <el-table-column prop=\"order_price\" label=\"订单价格\" />\r\n                    <el-table-column label=\"是否付款\" prop=\"pay_status\">\r\n                        <template v-slot=\"scope\">\r\n                            <el-tag type=\"success\" v-if=\"scope.row.pay_status === '1'\">已付款</el-tag>\r\n                            <el-tag type=\"danger\" v-else>未付款</el-tag>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"create_time\" label=\"创建时间\" />\r\n                    <el-table-column label=\"操作\" />\r\n                </el-table>\r\n                <!-- 分页区域 -->\r\n                <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n                    :current-page=\"queryInfo.pagenum\" :page-sizes=\"[5, 10, 15]\" :page-size=\"queryInfo.pagesize\"\r\n                    layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\r\n                </el-pagination>\r\n            </el-row>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref, onMounted } from 'vue'\r\nimport { getOrderList } from '@/axios/apis.js'\r\n\r\nconst queryInfo = reactive({\r\n    query: \"\",\r\n    pagenum: 1,\r\n    pagesize: 10,\r\n})\r\n\r\nconst orderList = ref([])\r\nconst selectList = ref([])\r\nconst dataList = ref([])\r\nconst total = ref(0)\r\n\r\n\r\nonMounted(() => {\r\n    getOrderListView()\r\n})\r\n\r\nconst getOrderListView = async () => {\r\n    const res = await getOrderList(queryInfo)\r\n    // console.log(res);\r\n    if (res.meta.status !== 200) {\r\n        return ElMessage.error(\"获取订单列表失败！\");\r\n    }\r\n\r\n    renderOrderList(res.data.goods)\r\n    // selectList.value = res.data.goods\r\n    dataList.value = res.data.goods\r\n    total.value = res.data.total\r\n\r\n}\r\n\r\nconst renderOrderList = (arr) => {\r\n    orderList.value = []\r\n    orderList.value.push(arr)\r\n}\r\n\r\n//查询按钮\r\nconst onSubmit = () => {\r\n    let arr = ref([])\r\n\r\n    if (selectList.value.order_number || selectList.value.order_price) {\r\n        if (selectList.value.order_number) {\r\n            arr = dataList.value.filter(v => v.order_number.indexOf(selectList.value.order_number) != -1)\r\n        }\r\n        if (selectList.value.pay_status) {\r\n            arr = (selectList.value.pay_status ? arr : dataList.value).filter(v => v.pay_status.indexOf(selectList.value.pay_status) != -1)\r\n\r\n        }\r\n        else {\r\n            arr = dataList.value\r\n        }\r\n        orderList.value = []\r\n        orderList.value.push(arr)\r\n    }\r\n}\r\n\r\n// 分页\r\nconst handleSizeChange = (newSize) => {\r\n    queryInfo.pagesize = newSize;\r\n    getOrderListView();\r\n}\r\nconst handleCurrentChange = (newPage) => {\r\n    queryInfo.pagenum = newPage;\r\n    getOrderListView();\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}